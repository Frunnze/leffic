import { createResource } from "solid-js";

const getFolders = async () => {
    const folderId = null;
    const baseUrl = 'http://localhost:8888/api/content/access-folder/';
    const params = new URLSearchParams({
        user_id: "23da4be0-70fd-439b-b984-aaf729959e9a"
    });
    if (folderId !== null) {
        params.append('folder_id', folderId);
    }
    const urlWithParams = `${baseUrl}?${params.toString()}`;

    const res = await fetch(urlWithParams);
    return res.json()
}

export default function Home() {
    const [folderContents] = createResource(getFolders)

    return (
        <div class="flex flex-col ml-17 w-full h-full pt-18 px-15 md:px-40 lg:px-80 gap-y-4">
            <div class="flex items-center w-full">
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="23" viewBox="0 0 27 20" fill="none">
                    <g clip-path="url(#clip0_9_17)">
                    <path d="M2.51163 20.2597C1.82093 20.2597 1.22965 20.0118 0.737791 19.5158C0.24593 19.0199 0 18.4237 0 17.7273V2.53247C0 1.83604 0.24593 1.23985 0.737791 0.743912C1.22965 0.247971 1.82093 0 2.51163 0H10.0465L12.5581 2.53247H22.6047C23.2953 2.53247 23.8866 2.78044 24.3785 3.27638C24.8703 3.77232 25.1163 4.36851 25.1163 5.06494H11.5221L9.01046 2.53247H2.51163V17.7273L5.52558 7.5974H27L23.7663 18.4554C23.5988 19.0041 23.2901 19.442 22.8401 19.7691C22.3901 20.0962 21.893 20.2597 21.3488 20.2597H2.51163ZM5.14884 17.7273H21.3488L23.6093 10.1299H7.4093L5.14884 17.7273Z" fill="#3083DC"/>
                    <path d="M5.14884 17.7273H21.3488L23.6093 10.1299H7.4093L5.14884 17.7273Z" fill="#3083DC"/>
                    </g>
                    <defs>
                    <clipPath id="clip0_9_17">
                    <rect width="27" height="20" fill="white"/>
                    </clipPath>
                    </defs>
                </svg>
                <span class="text-2xl font-semibold pl-2">
                    Home
                </span>
            </div>

            <div class="flex justify-between gap-4 flex-wrap">
                <div class="flex gap-x-4 flex-wrap gap-4">
                    <button class="bg-secondary text-primary flex items-center gap-2 py-1.5 px-3 rounded-md cursor-pointer font-medium text-sm md:text-base text-nowrap">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                            <path d="M8.99997 18C8.00866 17.0512 6.87279 16.3256 5.59236 15.8233C4.31192 15.3209 2.96953 15.0698 1.56519 15.0698V5.86047C2.95577 5.86047 4.29127 6.11512 5.57171 6.62442C6.85214 7.13372 7.9949 7.86977 8.99997 8.83256C10.005 7.86977 11.1478 7.13372 12.4282 6.62442C13.7087 6.11512 15.0442 5.86047 16.4348 5.86047V15.0698C15.0166 15.0698 13.6708 15.3209 12.3973 15.8233C11.1237 16.3256 9.99127 17.0512 8.99997 18ZM8.99997 15.8233C9.86736 15.1674 10.7898 14.6442 11.7674 14.2535C12.7449 13.8628 13.75 13.6047 14.7826 13.4791V7.70233C13.7775 7.88372 12.7896 8.25 11.819 8.80116C10.8483 9.35233 9.90866 10.0884 8.99997 11.0093C8.09127 10.0884 7.1516 9.35233 6.18095 8.80116C5.21029 8.25 4.22243 7.88372 3.21736 7.70233V13.4791C4.24997 13.6047 5.25504 13.8628 6.23258 14.2535C7.21011 14.6442 8.13258 15.1674 8.99997 15.8233ZM8.99997 6.69767C8.09127 6.69767 7.31337 6.36977 6.66627 5.71395C6.01917 5.05814 5.69562 4.26977 5.69562 3.34884C5.69562 2.42791 6.01917 1.63953 6.66627 0.983721C7.31337 0.327907 8.09127 0 8.99997 0C9.90866 0 10.6866 0.327907 11.3337 0.983721C11.9808 1.63953 12.3043 2.42791 12.3043 3.34884C12.3043 4.26977 11.9808 5.05814 11.3337 5.71395C10.6866 6.36977 9.90866 6.69767 8.99997 6.69767ZM8.99997 5.02326C9.45432 5.02326 9.84327 4.8593 10.1668 4.5314C10.4904 4.20349 10.6521 3.8093 10.6521 3.34884C10.6521 2.88837 10.4904 2.49419 10.1668 2.16628C9.84327 1.83837 9.45432 1.67442 8.99997 1.67442C8.54562 1.67442 8.15667 1.83837 7.83312 2.16628C7.50957 2.49419 7.34779 2.88837 7.34779 3.34884C7.34779 3.8093 7.50957 4.20349 7.83312 4.5314C8.15667 4.8593 8.54562 5.02326 8.99997 5.02326Z" fill="white"/>
                        </svg>
                        <span>Study</span>
                    </button>
                    <button class="btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 18 18" fill="none">
                            <g clip-path="url(#clip0_5_7)">
                            <path d="M7.93377 13.5V4.33125L4.98694 7.25625L3.40019 5.625L9.06716 0L14.7341 5.625L13.1474 7.25625L10.2006 4.33125V13.5H7.93377ZM2.26679 18C1.64342 18 1.10978 17.7797 0.66587 17.3391C0.221957 16.8984 0 16.3687 0 15.75V12.375H2.26679V15.75H15.8675V12.375H18.1343V15.75C18.1343 16.3687 17.9124 16.8984 17.4685 17.3391C17.0245 17.7797 16.4909 18 15.8675 18H2.26679Z" fill="#39393A"/>
                            </g>
                            <defs>
                            <clipPath id="clip0_5_7">
                            <rect width="18" height="18" fill="white"/>
                            </clipPath>
                            </defs>
                        </svg>
                        <span>AI Import</span>
                    </button>
                    <button class="btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                            <path d="M10.8 12.78H12.6V10.89H14.4V9H12.6V7.11H10.8V9H9V10.89H10.8V12.78ZM1.8 16.56C1.305 16.56 0.88125 16.3749 0.52875 16.0048C0.17625 15.6347 0 15.1897 0 14.67V3.33C0 2.81025 0.17625 2.36531 0.52875 1.99519C0.88125 1.62506 1.305 1.44 1.8 1.44H7.2L9 3.33H16.2C16.695 3.33 17.1188 3.51506 17.4713 3.88519C17.8238 4.25531 18 4.70025 18 5.22V14.67C18 15.1897 17.8238 15.6347 17.4713 16.0048C17.1188 16.3749 16.695 16.56 16.2 16.56H1.8ZM1.8 14.67H16.2V5.22H8.2575L6.4575 3.33H1.8V14.67Z" fill="#39393A"/>
                        </svg>
                        <span>New folder</span>
                    </button>
                    <button class="btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                            <path d="M7.73437 14.4H9.51562V11.7H12.1875V9.9H9.51562V7.2H7.73437V9.9H5.0625V11.7H7.73437V14.4ZM3.28125 18C2.79141 18 2.37207 17.8238 2.02324 17.4713C1.67441 17.1188 1.5 16.695 1.5 16.2V1.8C1.5 1.305 1.67441 0.88125 2.02324 0.52875C2.37207 0.17625 2.79141 0 3.28125 0H10.4062L15.75 5.4V16.2C15.75 16.695 15.5756 17.1188 15.2268 17.4713C14.8779 17.8238 14.4586 18 13.9687 18H3.28125ZM9.51562 6.3V1.8H3.28125V16.2H13.9687V6.3H9.51562Z" fill="#39393A"/>
                        </svg>
                        <span>New file</span>
                    </button>
                </div>
            <button class="btn-primary">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                    <path d="M2.25 11.25C1.63125 11.25 1.10156 11.0297 0.660937 10.5891C0.220312 10.1484 0 9.61875 0 9C0 8.38125 0.220312 7.85156 0.660937 7.41094C1.10156 6.97031 1.63125 6.75 2.25 6.75C2.86875 6.75 3.39844 6.97031 3.83906 7.41094C4.27969 7.85156 4.5 8.38125 4.5 9C4.5 9.61875 4.27969 10.1484 3.83906 10.5891C3.39844 11.0297 2.86875 11.25 2.25 11.25ZM9 11.25C8.38125 11.25 7.85156 11.0297 7.41094 10.5891C6.97031 10.1484 6.75 9.61875 6.75 9C6.75 8.38125 6.97031 7.85156 7.41094 7.41094C7.85156 6.97031 8.38125 6.75 9 6.75C9.61875 6.75 10.1484 6.97031 10.5891 7.41094C11.0297 7.85156 11.25 8.38125 11.25 9C11.25 9.61875 11.0297 10.1484 10.5891 10.5891C10.1484 11.0297 9.61875 11.25 9 11.25ZM15.75 11.25C15.1312 11.25 14.6016 11.0297 14.1609 10.5891C13.7203 10.1484 13.5 9.61875 13.5 9C13.5 8.38125 13.7203 7.85156 14.1609 7.41094C14.6016 6.97031 15.1312 6.75 15.75 6.75C16.3687 6.75 16.8984 6.97031 17.3391 7.41094C17.7797 7.85156 18 8.38125 18 9C18 9.61875 17.7797 10.1484 17.3391 10.5891C16.8984 11.0297 16.3687 11.25 15.75 11.25Z" fill="#39393A"/>
                </svg>
            </button>
            </div>

            <div class="flex flex-col gap-4">
                {/* <span class="text-sm">Subfolders and files</span> */}
                <hr class="border-tertiary-10"/>
                <Show when={folderContents()} fallback={<p>Contents are loading...</p>}>
                    <For each={folderContents().subfolders}>
                        {(unit) => (
                            <div class="border flex justify-between gap-2 py-1.5 px-3 border-tertiary-40 rounded-md hover:bg-secondary hover:fill-primary hover:text-primary hover:border-transparent hover:shadow-sm cursor-pointer font-medium text-sm md:text-base text-nowrap">
                                <div class="flex gap-2 items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                                        <path d="M2 17.6923C1.45 17.6923 0.979167 17.4946 0.5875 17.0992C0.195833 16.7037 0 16.2284 0 15.6731V3.55768C0 3.00239 0.195833 2.52703 0.5875 2.1316C0.979167 1.73617 1.45 1.53845 2 1.53845H8L10 3.55768H18C18.55 3.55768 19.0208 3.7554 19.4125 4.15083C19.8042 4.54626 20 5.02163 20 5.57691V15.6731C20 16.2284 19.8042 16.7037 19.4125 17.0992C19.0208 17.4946 18.55 17.6923 18 17.6923H2ZM2 15.6731H18V5.57691H9.175L7.175 3.55768H2V15.6731Z"/>
                                    </svg>
                                    <span>{unit.name}</span>
                                </div>
                                <button class="cursor-pointer rounded-sm px-1 hover:bg-tertiary-30">
                                    <svg class="fill-inherit" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                                        <path d="M2.25 11.25C1.63125 11.25 1.10156 11.0297 0.660937 10.5891C0.220312 10.1484 0 9.61875 0 9C0 8.38125 0.220312 7.85156 0.660937 7.41094C1.10156 6.97031 1.63125 6.75 2.25 6.75C2.86875 6.75 3.39844 6.97031 3.83906 7.41094C4.27969 7.85156 4.5 8.38125 4.5 9C4.5 9.61875 4.27969 10.1484 3.83906 10.5891C3.39844 11.0297 2.86875 11.25 2.25 11.25ZM9 11.25C8.38125 11.25 7.85156 11.0297 7.41094 10.5891C6.97031 10.1484 6.75 9.61875 6.75 9C6.75 8.38125 6.97031 7.85156 7.41094 7.41094C7.85156 6.97031 8.38125 6.75 9 6.75C9.61875 6.75 10.1484 6.97031 10.5891 7.41094C11.0297 7.85156 11.25 8.38125 11.25 9C11.25 9.61875 11.0297 10.1484 10.5891 10.5891C10.1484 11.0297 9.61875 11.25 9 11.25ZM15.75 11.25C15.1312 11.25 14.6016 11.0297 14.1609 10.5891C13.7203 10.1484 13.5 9.61875 13.5 9C13.5 8.38125 13.7203 7.85156 14.1609 7.41094C14.6016 6.97031 15.1312 6.75 15.75 6.75C16.3687 6.75 16.8984 6.97031 17.3391 7.41094C17.7797 7.85156 18 8.38125 18 9C18 9.61875 17.7797 10.1484 17.3391 10.5891C16.8984 11.0297 16.3687 11.25 15.75 11.25Z"/>
                                    </svg>
                                </button>
                            </div>
                        )}
                    </For>
                </Show>
                {/* <div class="border flex justify-center gap-2 py-1.5 px-3 border-tertiary-40 rounded-md hover:bg-tertiary-2 cursor-pointer font-medium text-sm md:text-base text-nowrap">
                    <span>Load more</span>
                </div> */}
            </div>
        </div>
    );
}